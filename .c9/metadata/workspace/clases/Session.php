{"filter":false,"title":"Session.php","tooltip":"/clases/Session.php","undoManager":{"mark":16,"position":16,"stack":[[{"start":{"row":0,"column":0},"end":{"row":70,"column":1},"action":"remove","lines":["<?php","","class Session {","","    private static $iniciada = false;","","    function __construct($nombre = null) {","        if (!self::$iniciada) {","            if($nombre!==null){","                session_name($nombre);","            }","            session_start();","            $this->_control();","        }","        self::$iniciada = true;","    }","","    private function _control() {","        $ip = $this->get('_ip');","        $cliente = $this->get('_cliente');","        if ($ip === NULL && $cliente === NULL) {","            $this->set('_ip', Server::getClientAddress());","            $this->set('_cliente', Server::getUserAgent());","        } else {","            if ($ip != Server::getClientAddress() || $cliente != Server::getUserAgent()) {","                $this->destroy();","            }","        }","    }","","    function isLogged(){","        return $this->getUser()!==null;","    }","","    function get($nombre) {","        if (isset($_SESSION[$nombre])) {","            return $_SESSION[$nombre];","        }","        return null;","    }","","    function getUser(){","        return $this->get(\"_usuario\");","    }","","    function set($nombre, $valor) {","        $_SESSION[$nombre] = $valor;","        return $this->get($nombre);","    }","    ","    function setUser(Usuario $usuario){","        $this->set(\"_usuario\", $usuario);","    }","","    function delete($nombre) {","        if (isset($_SESSION[$nombre])) {","            unset($_SESSION[$nombre]);","        }","    }","","    function destroy() {","        session_destroy();","    }","","    function sendRedirect($destino = \"index.php\", $final = true){","        header(\"Location: $destino\");","        if($final===true){","            exit();","        }","    }","}"],"id":2},{"start":{"row":0,"column":0},"end":{"row":69,"column":1},"action":"insert","lines":["<?php","class Session {","    private static $iniciada = false;","    function __construct($nombre = null) {","        if (!self::$iniciada){","            if($nombre!=null){","                session_name($nombre);","            }","            session_start();","            //$this->_control();","        }","        self::$iniciada = true;","    }","    private function _control() {","        $ip = $this->get('_ip');","        $cliente = $this->get('_cliente');","        if ($ip == null && $cliente == null) {","            $this->set('_ip', Server::getClientAddress());","            $this->set('_cliente', Server::getUserAgent());","        } else {","            if ($ip != Server::getClientAddress() || $cliente != Server::getUserAgent()) {","                $this->destroy();","            }","        }","    }","    ","    function isLogged(){","        return $this->getUser()!=null;","    }","    function get($nombre) {","        if (isset($_SESSION[$nombre])) {","            return $_SESSION[$nombre];","        }","        return null;","    }","    ","    function getUser(){","        return $this->get(\"_usuario\");","    }","    function set($nombre, $valor) {","        $_SESSION[$nombre] = $valor;","    }","    function setUser(Usuario $usuario){","        $this->set(\"_usuario\", $usuario);","    }","    ","    function delete($nombre) {","        if (isset($_SESSION[$nombre])) {","            unset($_SESSION[$nombre]);","        }","    }","    function destroy() {","        session_destroy();","    }","    //El segundo parametro nos manda al sitio y hacemos un exit","    function sendRedirect($destino = \"index.php\", $final = true){","        header(\"Location: $destino\");","        if($final ===true){","            exit();","        }","    }","    function getPacienteSas(){","        $this->get(\"_paciente\");","    }","    function setPacienteSas(PacienteSas $pacienteSas){","        $this->set(\"_pacienteSas\",$pacienteSas);","    }","","    ","}"]}],[{"start":{"row":61,"column":2},"end":{"row":66,"column":5},"action":"remove","lines":["  function getPacienteSas(){","        $this->get(\"_paciente\");","    }","    function setPacienteSas(PacienteSas $pacienteSas){","        $this->set(\"_pacienteSas\",$pacienteSas);","    }"],"id":3}],[{"start":{"row":61,"column":1},"end":{"row":61,"column":2},"action":"remove","lines":[" "],"id":4}],[{"start":{"row":61,"column":0},"end":{"row":61,"column":1},"action":"remove","lines":[" "],"id":5}],[{"start":{"row":60,"column":5},"end":{"row":61,"column":0},"action":"remove","lines":["",""],"id":6}],[{"start":{"row":52,"column":26},"end":{"row":53,"column":0},"action":"insert","lines":["",""],"id":7},{"start":{"row":53,"column":0},"end":{"row":53,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":53,"column":8},"end":{"row":53,"column":9},"action":"insert","lines":["r"],"id":8}],[{"start":{"row":53,"column":9},"end":{"row":53,"column":10},"action":"insert","lines":["e"],"id":9}],[{"start":{"row":53,"column":10},"end":{"row":53,"column":11},"action":"insert","lines":["t"],"id":10}],[{"start":{"row":53,"column":11},"end":{"row":53,"column":12},"action":"insert","lines":["u"],"id":11}],[{"start":{"row":53,"column":12},"end":{"row":53,"column":13},"action":"insert","lines":["r"],"id":12},{"start":{"row":53,"column":13},"end":{"row":53,"column":14},"action":"insert","lines":["n"]}],[{"start":{"row":53,"column":14},"end":{"row":53,"column":15},"action":"insert","lines":[" "],"id":13}],[{"start":{"row":53,"column":15},"end":{"row":53,"column":16},"action":"insert","lines":["t"],"id":14}],[{"start":{"row":53,"column":16},"end":{"row":53,"column":17},"action":"insert","lines":["r"],"id":15}],[{"start":{"row":53,"column":17},"end":{"row":53,"column":18},"action":"insert","lines":["u"],"id":16}],[{"start":{"row":53,"column":18},"end":{"row":53,"column":19},"action":"insert","lines":["e"],"id":17}],[{"start":{"row":53,"column":19},"end":{"row":53,"column":20},"action":"insert","lines":[";"],"id":18}]]},"ace":{"folds":[],"scrolltop":532.2222363212966,"scrollleft":0,"selection":{"start":{"row":53,"column":20},"end":{"row":53,"column":20},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":22,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1455633003836,"hash":"207872a8332137b1052334ed276b338b6ace6f31"}